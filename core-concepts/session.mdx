---
title: "Sessions"
description: "Grouping events together for organization and testing"
---

## What is a Session?

A **session** groups events together. Sessions don't have to contain related events - they're simply an organizational tool that you can use however makes sense for your use case.

The primary purpose of sessions is organization. You decide how to scope and use them based on your needs.

<Tip>
  Sessions are especially useful for multi-turn agent interactions where you
  want to group a conversation or workflow together
</Tip>

## How Sessions Work

### Automatic Session Creation

If no session is set, entering a function decorated with `@record` automatically creates a session for all emitted events:

```python
@record
def my_agent(user_input: str):
    response = client.chat.completions.create(...)
    return response

# Each call automatically gets its own session
my_agent("Hello")  # Auto-creates Session 1
my_agent("Hello again")  # Auto-creates Session 2
```

### Managed Session Creation

You have explicit control over sessions using two approaches:

#### Using the session() context manager

The session context manager is great for simple use cases where you want to group a few calls to your inference function together.

```python
from playgent import session

with session() as session_id:
    # All events in this block belong to the same session
    my_agent("First message")
    my_agent("Follow-up message")
    my_agent("Final message")

print(f"Session ID: {session_id}")
```

#### Custom Session IDs

Use your own session identifiers for easy tracking:

```python
with session(session_id="user-123-conversation-5"):
    my_agent(user_input)
```

#### Using set_session()

Calling `set_session()` manually is useful for more complex use cases (e.g. multi-turn agents). As long as you pass the same session ID to all turns, their events will be grouped under the same session.

```python
from fastapi import APIRouter, Header
from playgent import record, set_session

router = APIRouter()

@router.post("/agent")
@record
def infer(user_input: str, session_id: str = Header(None)):
    # Set the session for all events in this request
    if session_id:
        set_session(session_id)

    response = client.chat.completions.create(
        model="gpt-4",
        messages=[{"role": "user", "content": user_input}]
    )
    return response
```

<Note>
  `set_session()` is especially useful for multi-turn interactions with API
  routes, where you want to maintain session continuity across multiple HTTP
  requests from the same conversation.
</Note>

## Viewing Sessions

All sessions appear in the Playgent dashboard where you can:

- Browse and search sessions
- View all events in a session
- Annotate sessions for test case creation
- Compare different sessions

<CardGroup cols={2}>
  <Card title="Events" icon="bolt" href="/core-concepts/event">
    Learn about the events that make up sessions
  </Card>
  <Card title="Test Cases" icon="flask" href="/core-concepts/test-case">
    See how to turn sessions into test cases
  </Card>
</CardGroup>
